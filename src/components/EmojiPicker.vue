<script setup>
import { ref, computed, onMounted, onUnmounted } from "vue";

const props = defineProps({
  visible: {
    type: Boolean,
    default: false
  }
});

const currentCategory = ref("è¡¨æƒ…"); // å½“å‰é€‰ä¸­çš„è¡¨æƒ…åˆ†ç±»
const preloadedGifs = ref(new Set()); // ç”¨äºŽè·Ÿè¸ªå·²é¢„åŠ è½½çš„GIFè¡¨æƒ…

const emit = defineEmits(['select-emoji', 'update:visible']);

// åˆ›å»º doro GIF æ–‡ä»¶è·¯å¾„æ•°ç»„
const doroGifs = [
  '640.gif',
  '640_1.gif',
  '640_2.gif',
  '640_4.gif',
  '640_8.gif',
  '640_11.gif',
  '640_12.gif',
  '640_13.gif',
  '640_14.gif',
  '640_20.gif',
  '640_25.gif',
  '640_26.gif',
  '640_29.gif',
  '640_30.gif',
  '640_31.gif',
  '640_32.gif',
  '640_34.gif',
  '640_35.gif',
  '640_38.gif',
  '640_39.gif',
  '640_40.gif',
  '640_41.gif',
  '640_45.gif',
  '640_46.gif',
  '640_47.gif',
  '640_49.gif',
  '640_50.gif',
  '640_51.gif',
  '640_52.gif',
  '640_53.gif',
  '640_54.gif',
  '640_55.gif',
  '640_56.gif',
  '640_57.gif',
  '640_58.gif',
  '640_59.gif',
  '640_60.gif',
  '640_61.gif',
  '640_62.gif',
  '640_63.gif',
  '640_64.gif',
  '640_65.gif',
  '640_66.gif',
  '640_67.gif',
  '640_68.gif',
  '640_69.gif',
  '640_70.gif',
  '640_71.gif',
  '640_72.gif',
  '640_73.gif',
  '640_74.gif',
  '640_75.gif',
  '640_76.gif',
  '640_77.gif',
  '640_78.gif',
  '640_79.gif',
  '640_80.gif',
  '640_81.gif',
  '640_82.gif',
  '640_83.gif',
  '640_84.gif',
  '640_85.gif',
  '640_86.gif',
  '640_87.gif',
  '640_88.gif',
  '640_89.gif',
  '640_90.gif',
  '640_91.gif',
  '640_92.gif',
  '640_93.gif',
  '640_94.gif',
  '640_95.gif',
  '640_96.gif',
  '640_97.gif',
  '640_100.gif',
  '640_101.gif',
  '640_102.gif',
  '640_103.gif',
  '640_104.gif',
  '640_105.gif',
  '640_106.gif',
  '640_107.gif',
  '640_108.gif',
  '640_109.gif',
  '640_110.gif',
  '640_111.gif',
  '640_112.gif',
  '640_113.gif',
  '640_114.gif',
  '640_115.gif',
  '640_116.gif',
  '640_117.gif',
  '640_118.gif',
  '640_119.gif',
  '640_120.gif',
  '640_121.gif',
  '640_122.gif',
  '640_123.gif',
  '640_124.gif',
  '640_125.gif',
];

// é¢„åŠ è½½GIFå›¾ç‰‡
const preloadGifImages = () => {
  doroGifs.forEach(gif => {
    if (!preloadedGifs.value.has(gif)) {
      const img = new Image();
      img.src = `/src/assets/doro/${gif}`;
      img.onload = () => {
        preloadedGifs.value.add(gif);
      };
    }
  });
};


// è¡¨æƒ…åˆ†ç±»
const emojiCategories = {
  è¡¨æƒ…: [
    "ðŸ˜ƒ",
    "ðŸ˜„",
    "ðŸ˜",
    "ðŸ˜†",
    "ðŸ˜…",
    "ðŸ¤£",
    "ðŸ˜‚",
    "ðŸ™‚",
    "ðŸ™ƒ",
    "ðŸ« ",
    "ðŸ˜‰",
    "ðŸ˜Š",
    "ðŸ˜‡",
    "ðŸ¥°",
    "ðŸ˜",
    "ðŸ¤©",
    "ðŸ˜˜",
    "ðŸ˜—",
    "ðŸ˜š",
    "ðŸ˜™",
    "ðŸ¥²",
    "ðŸ˜‹",
    "ðŸ˜›",
    "ðŸ˜œ",
    "ðŸ¤ª",
    "ðŸ˜",
    "ðŸ¤‘",
    "ðŸ¤—",
    "ðŸ¤­",
    "ðŸ«¢",
    "ðŸ«£",
    "ðŸ¤«",
    "ðŸ¤”",
    "ðŸ«¡",
    "ðŸ¤",
    "ðŸ¤¨",
    "ðŸ˜ï¸",
    "ðŸ˜‘",
    "ðŸ˜¶",
    "ðŸ«¥",
    "ðŸ˜¶â€ðŸŒ«ï¸",
    "ðŸ˜",
    "ðŸ˜’",
    "ðŸ™„",
    "ðŸ˜¬",
    "ðŸ˜®â€ðŸ’¨",
    "ðŸ¤¥",
    "ðŸ«¨",
    "ðŸ™‚â€â†”ï¸",
    "ðŸ™‚â€â†•ï¸",
    "ðŸ˜Œ",
    "ðŸ˜”",
    "ðŸ˜ª",
    "ðŸ¤¤",
    "ðŸ˜´",
    "ðŸ˜·",
    "ðŸ¤’",
    "ðŸ¤•",
    "ðŸ¤¢",
    "ðŸ¤®",
    "ðŸ¤§",
    "ðŸ¥µ",
    "ðŸ¥¶",
    "ðŸ¥´",
    "ðŸ˜µ",
    "ðŸ˜µâ€ðŸ’«",
    "ðŸ¤¯",
    "ðŸ¤ ",
    "ðŸ¥³",
    "ðŸ¥¸",
    "ðŸ˜Ž",
    "ðŸ¤“",
    "ðŸ§",
    "ðŸ˜•",
    "ðŸ«¤",
    "ðŸ˜Ÿ",
    "ðŸ™",
    "â˜¹ï¸",
    "ðŸ˜®",
    "ðŸ˜¯",
    "ðŸ˜²",
    "ðŸ˜³",
    "ðŸ¥º",
    "ðŸ¥¹",
    "ðŸ˜¦",
    "ðŸ˜§",
    "ðŸ˜¨",
    "ðŸ˜°",
    "ðŸ˜¥",
    "ðŸ˜¢",
    "ðŸ˜­",
    "ðŸ˜±",
    "ðŸ˜–",
    "ðŸ˜£",
    "ðŸ˜ž",
    "ðŸ˜“",
    "ðŸ˜©",
    "ðŸ˜«",
    "ðŸ¥±",
    "ðŸ˜¤",
    "ðŸ˜¡",
    "ðŸ˜ ",
    "ðŸ¤¬",
    "ðŸ˜ˆ",
    "ðŸ‘¿",
    "ðŸ’€",
    "â˜ ï¸",
    "ðŸ’©",
    "ðŸ¤¡",
    "ðŸ‘¹",
    "ðŸ‘º",
    "ðŸ‘»",
    "ðŸ‘½ï¸",
    "ðŸ‘¾",
    "ðŸ¤–",
    "ðŸ˜º",
    "ðŸ˜¸",
    "ðŸ˜¹",
    "ðŸ˜»",
    "ðŸ˜¼",
    "ðŸ˜½",
    "ðŸ™€",
    "ðŸ˜¿",
    "ðŸ˜¾",
    "ðŸ™ˆ",
    "ðŸ™‰",
    "ðŸ™Š",
    "ðŸ’Œ",
    "ðŸ’˜",
    "ðŸ’",
    "ðŸ’–",
    "ðŸ’—",
    "ðŸ’“",
    "ðŸ’ž",
    "ðŸ’•",
    "ðŸ’Ÿ",
    "â£ï¸",
    "ðŸ’”",
    "â¤ï¸â€ðŸ”¥",
    "â¤ï¸â€ðŸ©¹",
    "â¤ï¸",
    "ðŸ©·",
    "ðŸ§¡",
    "ðŸ’›",
    "ðŸ’š",
    "ðŸ’™",
    "ðŸ©µ",
    "ðŸ’œ",
    "ðŸ¤Ž",
    "ðŸ–¤",
    "ðŸ©¶",
    "ðŸ¤",
    "ðŸ’‹",
    "ðŸ’¯",
    "ðŸ’¢",
    "ðŸ’¥",
    "ðŸ’«",
    "ðŸ’¦",
    "ðŸ’¨",
    "ðŸ•³ï¸",
    "ðŸ’¬",
    "ðŸ‘ï¸â€ðŸ—¨ï¸",
    "ðŸ—¨ï¸",
    "ðŸ—¯ï¸",
    "ðŸ’­",
    "ðŸ’¤",
  ],
  äººç‰©: [
    " ðŸ‘‹",
    "ðŸ¤š",
    "ðŸ–ï¸",
    "âœ‹ï¸",
    "ðŸ––",
    "ðŸ«±",
    "ðŸ«²",
    "ðŸ«³",
    "ðŸ«´",
    "ðŸ«·",
    "ðŸ«¸",
    "ðŸ‘Œ",
    "ðŸ¤Œ",
    "ðŸ¤",
    "âœŒï¸",
    "ðŸ¤ž",
    "ðŸ«°",
    "ðŸ¤Ÿ",
    "ðŸ¤˜",
    "ðŸ¤™",
    "ðŸ‘ˆï¸",
    "ðŸ‘‰ï¸",
    "ðŸ‘†ï¸",
    "ðŸ–•",
    "ðŸ‘‡ï¸",
    "â˜ï¸",
    "ðŸ«µ",
    "ðŸ‘ï¸",
    "ðŸ‘Žï¸",
    "âœŠï¸",
    "ðŸ‘Š",
    "ðŸ¤›",
    "ðŸ¤œ",
    "ðŸ‘",
    "ðŸ™Œ",
    "ðŸ«¶",
    "ðŸ‘",
    "ðŸ¤²",
    "ðŸ¤",
    "ðŸ™",
    "âœï¸",
    "ðŸ’…",
    "ðŸ¤³",
    "ðŸ’ª",
    "ðŸ¦¾",
    "ðŸ¦¿",
    "ðŸ¦µ",
    "ðŸ¦¶",
    "ðŸ‘‚ï¸",
    "ðŸ¦»",
    "ðŸ‘ƒ",
    "ðŸ§ ",
    "ðŸ«€",
    "ðŸ«",
    "ðŸ¦·",
    "ðŸ¦´",
    "ðŸ‘€",
    "ðŸ‘ï¸",
    "ðŸ‘…",
    "ðŸ‘„",
    "ðŸ«¦",
    "ðŸ‘¶",
    "ðŸ§’",
    "ðŸ‘¦",
    "ðŸ‘§",
    "ðŸ§‘",
    "ðŸ‘±",
    "ðŸ‘¨",
    "ðŸ§”",
    "ðŸ§”â€â™‚ï¸",
    "ðŸ§”â€â™€ï¸",
    "ðŸ‘¨â€ðŸ¦°",
    "ðŸ‘¨â€ðŸ¦±",
    "ðŸ‘¨â€ðŸ¦³",
    "ðŸ‘¨â€ðŸ¦²",
    "ðŸ‘©",
    "ðŸ‘©â€ðŸ¦°",
    "ðŸ§‘â€ðŸ¦°",
    "ðŸ‘©â€ðŸ¦±",
    "ðŸ§‘â€ðŸ¦±",
    "ðŸ‘©â€ðŸ¦³",
    "ðŸ§‘â€ðŸ¦³",
    "ðŸ‘©â€ðŸ¦²",
    "ðŸ§‘â€ðŸ¦²",
    "ðŸ‘±â€â™€ï¸",
    "ðŸ‘±â€â™‚ï¸",
    "ðŸ§“",
    "ðŸ‘´",
    "ðŸ‘µ",
    "ðŸ™",
    "ðŸ™â€â™‚ï¸",
    "ðŸ™â€â™€ï¸",
    "ðŸ™Ž",
    "ðŸ™Žâ€â™‚ï¸",
    "ðŸ™Žâ€â™€ï¸",
    "ðŸ™…",
    "ðŸ™…â€â™‚ï¸",
    "ðŸ™…â€â™€ï¸",
    "ðŸ™†",
    "ðŸ™†â€â™‚ï¸",
    "ðŸ™†â€â™€ï¸",
    "ðŸ’",
    "ðŸ’â€â™‚ï¸",
    "ðŸ’â€â™€ï¸",
    "ðŸ™‹",
    "ðŸ™‹â€â™‚ï¸",
    "ðŸ™‹â€â™€ï¸",
    "ðŸ§",
    "ðŸ§â€â™‚ï¸",
    "ðŸ§â€â™€ï¸",
    "ðŸ™‡",
    "ðŸ™‡â€â™‚ï¸",
    "ðŸ™‡â€â™€ï¸",
    "ðŸ¤¦",
    "ðŸ¤¦â€â™‚ï¸",
    "ðŸ¤¦â€â™€ï¸",
    "ðŸ¤·",
    "ðŸ¤·â€â™‚ï¸",
    "ðŸ¤·â€â™€ï¸",
    "ðŸ§‘â€âš•ï¸",
    "ðŸ‘¨â€âš•ï¸",
    "ðŸ‘©â€âš•ï¸",
    "ðŸ§‘â€ðŸŽ“",
    "ðŸ‘¨â€ðŸŽ“",
    "ðŸ‘©â€ðŸŽ“",
    "ðŸ§‘â€ðŸ«",
    "ðŸ‘¨â€ðŸ«",
    "ðŸ‘©â€ðŸ«",
    "ðŸ§‘â€âš–ï¸",
    "ðŸ‘¨â€âš–ï¸",
    "ðŸ‘©â€âš–ï¸",
    "ðŸ§‘â€ðŸŒ¾",
    "ðŸ‘¨â€ðŸŒ¾",
    "ðŸ‘©â€ðŸŒ¾",
    "ðŸ§‘â€ðŸ³",
    "ðŸ‘¨â€ðŸ³",
    "ðŸ‘©â€ðŸ³",
    "ðŸ§‘â€ðŸ”§",
    "ðŸ‘¨â€ðŸ”§",
    "ðŸ‘©â€ðŸ”§",
    "ðŸ§‘â€ðŸ­",
    "ðŸ‘¨â€ðŸ­",
    "ðŸ‘©â€ðŸ­",
    "ðŸ§‘â€ðŸ’¼",
    "ðŸ‘¨â€ðŸ’¼",
    "ðŸ‘©â€ðŸ’¼",
    "ðŸ§‘â€ðŸ”¬",
    "ðŸ‘¨â€ðŸ”¬",
    "ðŸ‘©â€ðŸ”¬",
    "ðŸ§‘â€ðŸ’»",
    "ðŸ‘¨â€ðŸ’»",
    "ðŸ‘©â€ðŸ’»",
    "ðŸ§‘â€ðŸŽ¤",
    "ðŸ‘¨â€ðŸŽ¤",
    "ðŸ‘©â€ðŸŽ¤",
    "ðŸ§‘â€ðŸŽ¨",
    "ðŸ‘¨â€ðŸŽ¨",
    "ðŸ‘©â€ðŸŽ¨",
    "ðŸ§‘â€âœˆï¸",
    "ðŸ‘¨â€âœˆï¸",
    "ðŸ‘©â€âœˆï¸",
    "ðŸ§‘â€ðŸš€",
    "ðŸ‘¨â€ðŸš€",
    "ðŸ‘©â€ðŸš€",
    "ðŸ§‘â€ðŸš’",
    "ðŸ‘¨â€ðŸš’",
    "ðŸ‘©â€ðŸš’",
    "ðŸ‘®",
    "ðŸ‘®â€â™‚ï¸",
    "ðŸ‘®â€â™€ï¸",
    "ðŸ•µï¸",
    "ðŸ•µï¸â€â™‚ï¸",
    "ðŸ•µï¸â€â™€ï¸",
    "ðŸ’‚",
    "ðŸ’‚â€â™‚ï¸",
    "ðŸ’‚â€â™€ï¸",
    "ðŸ¥·",
    "ðŸ‘·",
    "ðŸ‘·â€â™‚ï¸",
    "ðŸ‘·â€â™€ï¸",
    "ðŸ«…",
    "ðŸ¤´",
    "ðŸ‘¸",
    "ðŸ‘³",
    "ðŸ‘³â€â™‚ï¸",
    "ðŸ‘³â€â™€ï¸",
    "ðŸ‘²",
    "ðŸ§•",
    "ðŸ¤µ",
    "ðŸ¤µâ€â™‚ï¸",
    "ðŸ¤µâ€â™€ï¸",
    "ðŸ‘°",
    "ðŸ‘°â€â™‚ï¸",
    "ðŸ‘°â€â™€ï¸",
    "ðŸ¤°",
    "ðŸ«ƒ",
    "ðŸ«„",
    "ðŸ¤±",
    "ðŸ‘©â€ðŸ¼",
    "ðŸ‘¨â€ðŸ¼",
    "ðŸ§‘â€ðŸ¼",
    "ðŸ‘¼",
    "ðŸŽ…",
    "ðŸ¤¶",
    "ðŸ§‘â€ðŸŽ„",
    "ðŸ¦¸",
    "ðŸ¦¸â€â™‚ï¸",
    "ðŸ¦¸â€â™€ï¸",
    "ðŸ¦¹",
    "ðŸ¦¹â€â™‚ï¸",
    "ðŸ¦¹â€â™€ï¸",
    "ðŸ§™",
    "ðŸ§™â€â™‚ï¸",
    "ðŸ§™â€â™€ï¸",
    "ðŸ§š",
    "ðŸ§šâ€â™‚ï¸",
    "ðŸ§šâ€â™€ï¸",
    "ðŸ§›",
    "ðŸ§›â€â™‚ï¸",
    "ðŸ§›â€â™€ï¸",
    "ðŸ§œ",
    "ðŸ§œâ€â™‚ï¸",
    "ðŸ§œâ€â™€ï¸",
    "ðŸ§",
    "ðŸ§â€â™‚ï¸",
    "ðŸ§â€â™€ï¸",
    "ðŸ§ž",
    "ðŸ§žâ€â™‚ï¸",
    "ðŸ§žâ€â™€ï¸",
    "ðŸ§Ÿ",
    "ðŸ§Ÿâ€â™‚ï¸",
    "ðŸ§Ÿâ€â™€ï¸",
    "ðŸ§Œ",
    "ðŸ’†",
    "ðŸ’†â€â™‚ï¸",
    "ðŸ’†â€â™€ï¸",
    "ðŸ’‡",
    "ðŸ’‡â€â™‚ï¸",
    "ðŸ’‡â€â™€ï¸",
    "ðŸš¶",
    "ðŸš¶â€â™‚ï¸",
    "ðŸš¶â€â™€ï¸",
    "ðŸš¶â€âž¡ï¸",
    "ðŸš¶â€â™€ï¸â€âž¡ï¸",
    "ðŸš¶â€â™‚ï¸â€âž¡ï¸",
    "ðŸ§",
    "ðŸ§â€â™‚ï¸",
    "ðŸ§â€â™€ï¸",
    "ðŸ§Ž",
    "ðŸ§Žâ€â™‚ï¸",
    "ðŸ§Žâ€â™€ï¸",
    "ðŸ§Žâ€âž¡ï¸",
    "ðŸ§Žâ€â™€ï¸â€âž¡ï¸",
    "ðŸ§Žâ€â™‚ï¸â€âž¡ï¸",
    "ðŸ§‘â€ðŸ¦¯",
    "ðŸ§‘â€ðŸ¦¯â€âž¡ï¸",
    "ðŸ‘¨â€ðŸ¦¯",
    "ðŸ‘¨â€ðŸ¦¯â€âž¡ï¸",
    "ðŸ‘©â€ðŸ¦¯",
    "ðŸ‘©â€ðŸ¦¯â€âž¡ï¸",
    "ðŸ§‘â€ðŸ¦¼",
    "ðŸ§‘â€ðŸ¦¼â€âž¡ï¸",
    "ðŸ‘¨â€ðŸ¦¼",
    "ðŸ‘¨â€ðŸ¦¼â€âž¡ï¸",
    "ðŸ‘©â€ðŸ¦¼",
    "ðŸ‘©â€ðŸ¦¼â€âž¡ï¸",
    "ðŸ§‘â€ðŸ¦½",
    "ðŸ§‘â€ðŸ¦½â€âž¡ï¸",
    "ðŸ‘¨â€ðŸ¦½",
    "ðŸ‘¨â€ðŸ¦½â€âž¡ï¸",
    "ðŸ‘©â€ðŸ¦½",
    "ðŸ‘©â€ðŸ¦½â€âž¡ï¸",
    "ðŸƒ",
    "ðŸƒâ€â™‚ï¸",
    "ðŸƒâ€â™€ï¸",
    "ðŸƒâ€âž¡ï¸",
    "ðŸƒâ€â™€ï¸â€âž¡ï¸",
    "ðŸƒâ€â™‚ï¸â€âž¡ï¸",
    "ðŸ’ƒ",
    "ðŸ•º",
    "ðŸ•´ï¸",
    "ðŸ‘¯",
    "ðŸ‘¯â€â™‚ï¸",
    "ðŸ‘¯â€â™€ï¸",
    "ðŸ§–",
    "ðŸ§–â€â™‚ï¸",
    "ðŸ§–â€â™€ï¸",
    "ðŸ§—",
    "ðŸ§—â€â™‚ï¸",
    "ðŸ§—â€â™€ï¸",
    "ðŸ¤º",
    "ðŸ‡",
    "â›·ï¸",
    "ðŸ‚ï¸",
    "ðŸŒï¸",
    "ðŸŒï¸â€â™‚ï¸",
    "ðŸŒï¸â€â™€ï¸",
    "ðŸ„ï¸",
    "ðŸ„â€â™‚ï¸",
    "ðŸ„â€â™€ï¸",
    "ðŸš£",
    "ðŸš£â€â™‚ï¸",
    "ðŸš£â€â™€ï¸",
    "ðŸŠï¸",
    "ðŸŠâ€â™‚ï¸",
    "ðŸŠâ€â™€ï¸",
    "â›¹ï¸",
    "â›¹ï¸â€â™‚ï¸",
    "â›¹ï¸â€â™€ï¸",
    "ðŸ‹ï¸",
    "ðŸ‹ï¸â€â™‚ï¸",
    "ðŸ‹ï¸â€â™€ï¸",
    "ðŸš´",
    "ðŸš´â€â™‚ï¸",
    "ðŸš´â€â™€ï¸",
    "ðŸšµ",
    "ðŸšµâ€â™‚ï¸",
    "ðŸšµâ€â™€ï¸",
    "ðŸ¤¸",
    "ðŸ¤¸â€â™‚ï¸",
    "ðŸ¤¸â€â™€ï¸",
    "ðŸ¤¼",
    "ðŸ¤¼â€â™‚ï¸",
    "ðŸ¤¼â€â™€ï¸",
    "ðŸ¤½",
    "ðŸ¤½â€â™‚ï¸",
    "ðŸ¤½â€â™€ï¸",
    "ðŸ¤¾",
    "ðŸ¤¾â€â™‚ï¸",
    "ðŸ¤¾â€â™€ï¸",
    "ðŸ¤¹",
    "ðŸ¤¹â€â™‚ï¸",
    "ðŸ¤¹â€â™€ï¸",
    "ðŸ§˜",
    "ðŸ§˜â€â™‚ï¸",
    "ðŸ§˜â€â™€ï¸",
    "ðŸ›€",
    "ðŸ›Œ",
    "ðŸ§‘â€ðŸ¤â€ðŸ§‘",
    "ðŸ‘­",
    "ðŸ‘«",
    "ðŸ‘¬",
    "ðŸ’",
    "ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨",
    "ðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨",
    "ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘©",
    "ðŸ’‘",
    "ðŸ‘©â€â¤ï¸â€ðŸ‘¨",
    "ðŸ‘¨â€â¤ï¸â€ðŸ‘¨",
    "ðŸ‘©â€â¤ï¸â€ðŸ‘©",
    "ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§",
    "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§",
    "ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§",
    "ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘§",
    "ðŸ‘©â€ðŸ‘©â€ðŸ‘¦",
    "ðŸ‘©â€ðŸ‘©â€ðŸ‘§",
    "ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",
    "ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦",
    "ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§",
    "ðŸ‘¨â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘§",
    "ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦",
    "ðŸ‘¨â€ðŸ‘§â€ðŸ‘§",
    "ðŸ‘©â€ðŸ‘¦",
    "ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦",
    "ðŸ‘©â€ðŸ‘§",
    "ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",
    "ðŸ‘©â€ðŸ‘§â€ðŸ‘§",
    "ðŸ—£ï¸",
    "ðŸ‘¤",
    "ðŸ‘¥",
    "ðŸ«‚",
    "ðŸ‘ªï¸",
    "ðŸ§‘â€ðŸ§‘â€ðŸ§’",
    "ðŸ§‘â€ðŸ§‘â€ðŸ§’â€ðŸ§’",
    "ðŸ§‘â€ðŸ§’",
    "ðŸ§‘â€ðŸ§’â€ðŸ§’",
    "ðŸ‘£",
  ],
  åŠ¨ç‰©: [
    "ðŸµ",
    "ðŸ’",
    "ðŸ¦",
    "ðŸ¦§",
    "ðŸ¶",
    "ðŸ•ï¸",
    "ðŸ¦®",
    "ðŸ•â€ðŸ¦º",
    "ðŸ©",
    "ðŸº",
    "ðŸ¦Š",
    "ðŸ¦",
    "ðŸ±",
    "ðŸˆï¸",
    "ðŸˆâ€â¬›",
    "ðŸ¦",
    "ðŸ¯",
    "ðŸ…",
    "ðŸ†",
    "ðŸ´",
    "ðŸ«Ž",
    "ðŸ«",
    "ðŸŽ",
    "ðŸ¦„",
    "ðŸ¦“",
    "ðŸ¦Œ",
    "ðŸ¦¬",
    "ðŸ®",
    "ðŸ‚",
    "ðŸƒ",
    "ðŸ„",
    "ðŸ·",
    "ðŸ–",
    "ðŸ—",
    "ðŸ½",
    "ðŸ",
    "ðŸ‘",
    "ðŸ",
    "ðŸª",
    "ðŸ«",
    "ðŸ¦™",
    "ðŸ¦’",
    "ðŸ˜",
    "ðŸ¦£",
    "ðŸ¦",
    "ðŸ¦›",
    "ðŸ­",
    "ðŸ",
    "ðŸ€",
    "ðŸ¹",
    "ðŸ°",
    "ðŸ‡",
    "ðŸ¿ï¸",
    "ðŸ¦«",
    "ðŸ¦”",
    "ðŸ¦‡",
    "ðŸ»",
    "ðŸ»â€â„ï¸",
    "ðŸ¨",
    "ðŸ¼",
    "ðŸ¦¥",
    "ðŸ¦¦",
    "ðŸ¦¨",
    "ðŸ¦˜",
    "ðŸ¦¡",
    "ðŸ¾",
    "ðŸ¦ƒ",
    "ðŸ”",
    "ðŸ“",
    "ðŸ£",
    "ðŸ¤",
    "ðŸ¥",
    "ðŸ¦ï¸",
    "ðŸ§",
    "ðŸ•Šï¸",
    "ðŸ¦…",
    "ðŸ¦†",
    "ðŸ¦¢",
    "ðŸ¦‰",
    "ðŸ¦¤",
    "ðŸª¶",
    "ðŸ¦©",
    "ðŸ¦š",
    "ðŸ¦œ",
    "ðŸª½",
    "ðŸ¦â€â¬›",
    "ðŸª¿",
    "ðŸ¦â€ðŸ”¥",
    "ðŸ¸",
    "ðŸŠ",
    "ðŸ¢",
    "ðŸ¦Ž",
    "ðŸ",
    "ðŸ²",
    "ðŸ‰",
    "ðŸ¦•",
    "ðŸ¦–",
    "ðŸ³",
    "ðŸ‹",
    "ðŸ¬",
    "ðŸ¦­",
    "ðŸŸï¸",
    "ðŸ ",
    "ðŸ¡",
    "ðŸ¦ˆ",
    "ðŸ™",
    "ðŸš",
    "ðŸª¸",
    "ðŸª¼",
    "ðŸŒ",
    "ðŸ¦‹",
    "ðŸ›",
    "ðŸœ",
    "ðŸ",
    "ðŸª²",
    "ðŸž",
    "ðŸ¦—",
    "ðŸª³",
    "ðŸ•·ï¸",
    "ðŸ•¸ï¸",
    "ðŸ¦‚",
    "ðŸ¦Ÿ",
    "ðŸª°",
    "ðŸª±",
  ],
  é£Ÿç‰©: [
    "ðŸ‡",
    "ðŸˆ",
    "ðŸ‰",
    "ðŸŠ",
    "ðŸ‹",
    "ðŸ‹â€ðŸŸ©",
    "ðŸŒ",
    "ðŸ",
    "ðŸ¥­",
    "ðŸŽ",
    "ðŸ",
    "ðŸ",
    "ðŸ‘",
    "ðŸ’",
    "ðŸ“",
    "ðŸ«",
    "ðŸ¥",
    "ðŸ…",
    "ðŸ«’",
    "ðŸ¥¥",
    "ðŸ¥‘",
    "ðŸ†",
    "ðŸ¥”",
    "ðŸ¥•",
    "ðŸŒ½",
    "ðŸŒ¶ï¸",
    "ðŸ«‘",
    "ðŸ¥’",
    "ðŸ¥¬",
    "ðŸ¥¦",
    "ðŸ§„",
    "ðŸ§…",
    "ðŸ¥œ",
    "ðŸ«˜",
    "ðŸŒ°",
    "ðŸ«š",
    "ðŸ«›",
    "ðŸ„â€ðŸŸ«",
    "ðŸž",
    "ðŸ¥",
    "ðŸ¥–",
    "ðŸ«“",
    "ðŸ¥¨",
    "ðŸ¥¯",
    "ðŸ¥ž",
    "ðŸ§‡",
    "ðŸ§€",
    "ðŸ–",
    "ðŸ—",
    "ðŸ¥©",
    "ðŸ¥“",
    "ðŸ”",
    "ðŸŸ",
    "ðŸ•",
    "ðŸŒ­",
    "ðŸ¥ª",
    "ðŸŒ®",
    "ðŸŒ¯",
    "ðŸ«”",
    "ðŸ¥™",
    "ðŸ§†",
    "ðŸ¥š",
    "ðŸ³",
    "ðŸ¥˜",
    "ðŸ²",
    "ðŸ«•",
    "ðŸ¥£",
    "ðŸ¥—",
    "ðŸ¿",
    "ðŸ§ˆ",
    "ðŸ§‚",
    "ðŸ¥«",
    "ðŸ±",
    "ðŸ˜",
    "ðŸ™",
    "ðŸš",
    "ðŸ›",
    "ðŸœ",
    "ðŸ",
    "ðŸ ",
    "ðŸ¢",
    "ðŸ£",
    "ðŸ¤",
    "ðŸ¥",
    "ðŸ¥®",
    "ðŸ¡",
    "ðŸ¥Ÿ",
    "ðŸ¥ ",
  ],
  æ´»åŠ¨: [
    "ðŸŽƒ",
    "ðŸŽ„",
    "ðŸŽ†",
    "ðŸŽ‡",
    "ðŸ§¨",
    "âœ¨ï¸",
    "ðŸŽˆ",
    "ðŸŽ‰",
    "ðŸŽŠ",
    "ðŸŽ‹",
    "ðŸŽ",
    "ðŸŽŽ",
    "ðŸŽ",
    "ðŸŽ",
    "ðŸŽ‘",
    "ðŸ§§",
    "ðŸŽ€",
    "ðŸŽ",
    "ðŸŽ—ï¸",
    "ðŸŽŸï¸",
    "ðŸŽ«",
    "ðŸŽ–ï¸",
    "ðŸ†ï¸",
    "ðŸ…",
    "ðŸ¥‡",
    "ðŸ¥ˆ",
    "ðŸ¥‰",
    "âš½ï¸",
    "âš¾ï¸",
    "ðŸ¥Ž",
    "ðŸ€",
    "ðŸ",
    "ðŸˆ",
    "ðŸ‰",
    "ðŸŽ¾",
    "ðŸ¥",
    "ðŸŽ³",
    "ðŸ",
    "ðŸ‘",
    "ðŸ’",
    "ðŸ¥",
    "ðŸ“",
    "ðŸ¸",
    "ðŸ¥Š",
    "ðŸ¥‹",
    "ðŸ¥…",
    "â›³ï¸",
    "â›¸ï¸",
    "ðŸŽ£",
    "ðŸ¤¿",
    "ðŸŽ½",
    "ðŸŽ¿",
    "ðŸ›·",
    "ðŸ¥Œ",
    "ðŸŽ¯",
    "ðŸª€",
    "ðŸª",
    "ðŸ”«",
    "ðŸŽ±",
    "ðŸ”®",
    "ðŸª„",
    "ðŸŽ®ï¸",
    "ðŸ•¹ï¸",
    "ðŸŽ°",
    "ðŸŽ²",
    "ðŸ§©",
    "ðŸ§¸",
    "ðŸª…",
    "ðŸª©",
    "ðŸª†",
    "â™ ï¸",
    "â™¥ï¸",
    "â™¦ï¸",
    "â™£ï¸",
    "â™Ÿï¸",
    "ðŸƒ",
    "ðŸ€„ï¸",
    "ðŸŽ´",
    "ðŸŽ­ï¸",
    "ðŸ–¼ï¸",
    "ðŸŽ¨",
    "ðŸ§µ",
    "ðŸª¡",
    "ðŸ§¶",
  ],
  æ—…è¡Œ: [
    "ðŸŒï¸",
    "ðŸŒ",
    "ðŸ—ºï¸",
    "ðŸ—¾",
    "ðŸ§­",
    "ðŸ”ï¸",
    "â›°ï¸",
    "ðŸŒ‹",
    "ðŸ—»",
    "ðŸ•ï¸",
    "ðŸ–ï¸",
    "ðŸœï¸",
    "ðŸï¸",
    "ðŸžï¸",
    "ðŸŸï¸",
    "ðŸ›ï¸",
    "ðŸ—ï¸",
    "ðŸ§±",
    "ðŸª¨",
    "ðŸªµ",
    "ðŸ›–",
    "ðŸ˜ï¸",
    "ðŸšï¸",
    "ðŸ ï¸",
    "ðŸ¡",
    "ðŸ¢",
    "ðŸ£",
    "ðŸ¤",
    "ðŸ¥",
    "ðŸ¦",
    "ðŸ¨",
    "ðŸ©",
    "ðŸª",
    "ðŸ«",
    "ðŸ¬",
    "ðŸ­ï¸",
    "ðŸ¯",
    "ðŸ°",
    "ðŸ’’",
    "ðŸ—¼",
    "ðŸ—½",
    "â›ªï¸",
    "ðŸ•Œ",
    "ðŸ›•",
    "ðŸ•",
    "â›©ï¸",
    "ðŸ•‹",
    "â›²ï¸",
    "â›ºï¸",
    "ðŸŒ",
    "ðŸŒƒ",
    "ðŸ™ï¸",
    "ðŸŒ„",
    "ðŸŒ…",
    "ðŸŒ†",
    "ðŸŒ‡",
    "ðŸŒ‰",
    "â™¨ï¸",
    "ðŸŽ ",
    "ðŸ›",
    "ðŸŽ¡",
    "ðŸŽ¢",
    "ðŸ’ˆ",
    "ðŸŽª",
    "ðŸš‚",
    "ðŸšƒ",
    "ðŸš„",
    "ðŸš…",
    "ðŸš†",
    "ðŸš‡ï¸",
    "ðŸšˆ",
    "ðŸš‰",
    "ðŸšŠ",
    "ðŸš",
    "ðŸšž",
    "ðŸš‹",
    "ðŸšŒ",
    "ðŸšï¸",
    "ðŸšŽ",
    "ðŸš",
    "ðŸš‘ï¸",
    "ðŸš’",
    "ðŸš“",
    "ðŸš”ï¸",
    "ðŸš•",
    "ðŸš–",
    "ðŸš—",
    "ðŸš˜ï¸",
    "ðŸš™",
    "ðŸ›»",
    "ðŸšš",
    "ðŸš›",
    "ðŸšœ",
    "ðŸŽï¸",
    "ðŸï¸",
    "ðŸ›µ",
    "ðŸ¦½",
    "ðŸ¦¼",
    "ðŸ›º",
    "ðŸš²ï¸",
    "ðŸ›´",
    "ðŸ›¹",
    "ðŸ›¼",
    "ðŸš",
    "ðŸ›£ï¸",
    "ðŸ›¤ï¸",
    "ðŸ›¢ï¸",
    "â›½ï¸",
    "ðŸ›ž",
    "ðŸš¨",
    "ðŸš¥",
    "ðŸš¦",
    "ðŸ›‘",
    "ðŸš§",
    "âš“ï¸",
    "ðŸ›Ÿ",
    "â›µï¸",
    "ðŸ›¶",
    "ðŸš¤",
    "ðŸ›³ï¸",
    "â›´ï¸",
    "ðŸ›¥ï¸",
    "ðŸš¢",
    "âœˆï¸",
    "ðŸ›©ï¸",
    "ðŸ›«",
    "ðŸ›¬",
    "ðŸª‚",
    "ðŸ’º",
    "ðŸš",
    "ðŸšŸ",
    "ðŸš ",
    "ðŸš¡",
    "ðŸ›°ï¸",
    "ðŸš€",
    "ðŸ›¸",
    "ðŸ›Žï¸",
    "ðŸ§³",
    "âŒ›ï¸",
    "â³ï¸",
    "âŒšï¸",
    "â°ï¸",
    "â±ï¸",
    "â²ï¸",
    "ðŸ•°ï¸",
    "ðŸ•›ï¸",
    "ðŸ•§ï¸",
    "ðŸ•ï¸",
    "ðŸ•œï¸",
    "ðŸ•‘ï¸",
    "ðŸ•ï¸",
    "ðŸ•’ï¸",
    "ðŸ•žï¸",
    "ðŸ•“ï¸",
    "ðŸ•Ÿï¸",
    "ðŸ•”ï¸",
    "ðŸ• ï¸",
    "ðŸ••ï¸",
    "ðŸ•¡ï¸",
    "ðŸ•–ï¸",
    "ðŸ•¢ï¸",
    "ðŸ•—ï¸",
    "ðŸ•£ï¸",
    "ðŸ•˜ï¸",
    "ðŸ•¤ï¸",
    "ðŸ•™ï¸",
    "ðŸ•¥ï¸",
    "ðŸ•šï¸",
    "ðŸ•¦ï¸",
    "ðŸŒ‘",
    "ðŸŒ’",
    "ðŸŒ“",
    "ðŸŒ”",
    "ðŸŒ•ï¸",
    "ðŸŒ–",
    "ðŸŒ—",
    "ðŸŒ˜",
    "ðŸŒ™",
    "ðŸŒš",
    "ðŸŒ›",
    "ðŸŒœï¸",
    "ðŸŒ¡ï¸",
    "â˜€ï¸",
    "ðŸŒ",
    "ðŸŒž",
    "ðŸª",
    "â­ï¸",
    "ðŸŒŸ",
    "ðŸŒ ",
    "ðŸŒŒ",
    "â˜ï¸",
    "â›…ï¸",
    "â›ˆï¸",
    "ðŸŒ¤ï¸",
    "ðŸŒ¥ï¸",
    "ðŸŒ¦ï¸",
    "ðŸŒ§ï¸",
    "ðŸŒ¨ï¸",
    "ðŸŒ©ï¸",
    "ðŸŒªï¸",
    "ðŸŒ«ï¸",
    "ðŸŒ¬ï¸",
    "ðŸŒ€",
    "ðŸŒˆ",
    "ðŸŒ‚",
    "â˜‚ï¸",
    "â˜”ï¸",
    "â›±ï¸",
    "âš¡ï¸",
    "â„ï¸",
    "â˜ƒï¸",
    "â›„ï¸",
    "â˜„ï¸",
    "ðŸ”¥",
    "ðŸ’§",
    "ðŸŒŠ",
  ],
  doro: doroGifs
};

// è®¡ç®—å½“å‰åˆ†ç±»çš„è¡¨æƒ…
const currentEmojis = computed(() => {
  return emojiCategories[currentCategory.value] || [];
});

// åˆ¤æ–­æ˜¯å¦ä¸ºGIFè¡¨æƒ…
const isGifEmoji = (emoji) => {
  return typeof emoji === 'string' && emoji.endsWith('.gif');
};

// æ’å…¥è¡¨æƒ…
const insertEmoji = (emoji) => {
  emit('select-emoji', emoji);
};

// å…³é—­è¡¨æƒ…é€‰æ‹©å™¨
const closePicker = () => {
  emit('update:visible', false);
};

// ç‚¹å‡»å¤–éƒ¨å…³é—­è¡¨æƒ…é€‰æ‹©å™¨
const handleClickOutside = (event) => {
  const picker = document.querySelector(".emoji-picker");
  const button = document.querySelector(".emoji-button");

  if (
    props.visible &&
    picker &&
    !picker.contains(event.target) &&
    button && !button.contains(event.target)
  ) {
    closePicker();
  }
};

// ç”Ÿå‘½å‘¨æœŸé’©å­
onMounted(() => {
  document.addEventListener("click", handleClickOutside);
  // é¢„åŠ è½½GIFå›¾ç‰‡
  preloadGifImages();
});

onUnmounted(() => {
  document.removeEventListener("click", handleClickOutside);
});
</script>

<template>
  <!-- emoji åŒº -->
  <div class="emoji-picker" v-if="visible">
    <div class="emoji-tabs">
      <div
        v-for="(category, name) in emojiCategories"
        :key="name"
        class="emoji-tab"
        :class="{ active: currentCategory === name }"
        @click="currentCategory = name"
      >
        {{ name }}
      </div>
    </div>
    <div :class="{'emoji-grid': true, 'doro-grid': currentCategory === 'doro'}">
      <div
        v-for="emoji in currentEmojis"
        :key="emoji"
        class="emoji-item"
        @click="insertEmoji(emoji)"
      >
        <template v-if="isGifEmoji(emoji)">
          <img :src="'/src/assets/doro/' + emoji" class="gif-emoji" />
        </template>
        <template v-else>
          {{ emoji }}
        </template>
      </div>
    </div>
  </div>
</template>

<style scoped>
/* emojiè¡¨æƒ… */
.emoji-picker {
  position: absolute;
  left: 300px;
  bottom: 61px;
  z-index: 1000;
  width: 350px;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.emoji-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
  overflow-x: auto;
}

.emoji-tab {
  padding: 4px 8px;
  border-radius: 4px;
  cursor: pointer;
  white-space: nowrap;
  transition: background-color 0.2s;
}

.emoji-tab:hover {
  background: #f0f0f0;
}

.emoji-tab.active {
  background: #8b98e4;
  color: white;
}

.emoji-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 5px;
  height: 200px;
  overflow-y: auto;
}

/* doro GIFå¸ƒå±€ä¸ºä¸€è¡Œå››ä¸ª */
.doro-grid {
  grid-template-columns: repeat(4, 1fr);
}

.emoji-item {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 5px;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.2s;
  height: 36px;
  box-sizing: border-box;
}

.emoji-item:hover {
  background-color: #f0f0f0;
}

.gif-emoji {
  width: 40px;
  height: 40px;
  object-fit: contain;
  border-radius: 4px;
  max-width: 100%;
  display: block;
}
</style>
